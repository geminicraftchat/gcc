# GeminiCraftChat 控制台命令指南

> **注意**: 这是中文版文档。[English version](docs/en/CONSOLE_COMMANDS.md) | [返回文档首页](docs/README.md)

## 概述

GeminiCraftChat 插件现在完全支持控制台命令执行。管理员可以在服务器控制台中使用所有插件命令，无需进入游戏。

## 控制台权限

- **控制台默认拥有所有管理员权限**
- 无需配置额外权限，控制台可以执行所有命令
- 某些特定于玩家的功能会有相应提示

## 可用命令

### 基础管理命令

#### 重新加载配置
```
gcc reload
```
- 重新加载插件配置文件
- 应用新的设置而无需重启服务器

#### 清除对话历史
```
gcc clear all
```
- 清除所有玩家的对话历史记录
- 控制台无法清除单个玩家的历史记录

#### 切换调试模式
```
gcc debug
```
- 启用/禁用调试模式
- 调试模式会输出更详细的日志信息

### 模型管理命令

#### 切换AI模型
```
gcc model <模型名称>
```
示例：
```
gcc model api1
gcc model api2
gcc model openai
```
- 全局切换当前使用的AI模型
- 影响所有后续的AI对话

#### 调整模型温度
```
gcc temp <数值>
```
示例：
```
gcc temp 0.7
gcc temp 0.3
gcc temp 1.0
```
- 设置AI模型的创造性程度
- 范围：0.0（保守） - 1.0（创造性）

### 人设管理命令

#### 查看可用人设
```
gcc persona list
```
- 显示所有配置的AI人设
- 包含人设名称和描述

#### 切换人设（仅限玩家）
```
gcc persona switch <人设名称>
```
- **注意**：控制台无法切换人设
- 此功能仅限游戏内玩家使用

### 日志管理命令

#### 查看日志统计
```
gcc logs stats
```
显示信息包括：
- 总API调用次数
- 总错误次数
- 活跃玩家数
- 使用的模型数
- 成功率
- 平均响应时间
- 日志配置状态

#### 重置统计数据
```
gcc logs reset
```
- 清空所有统计计数器
- 重新开始统计

#### 导出玩家统计
```
gcc logs export
```
- 将当前统计信息导出到日志文件
- 文件保存在 `plugins/GeminiCraftChat/logs/` 目录

### 帮助命令
```
gcc
```
或
```
gcc help
```
- 显示所有可用命令的帮助信息
- 控制台版本会显示特殊提示

## 控制台特有功能

### 1. 无权限限制
- 控制台执行命令时不受权限系统限制
- 自动拥有所有管理员权限

### 2. 全局操作
- 控制台执行的命令通常是全局性的
- 影响整个服务器的设置

### 3. 日志记录
- 控制台执行的命令会记录为 "CONSOLE" 用户
- 便于追踪管理操作

## 使用示例

### 服务器启动后的常见操作

1. **检查插件状态**
   ```
   gcc logs stats
   ```

2. **切换到生产环境模型**
   ```
   gcc model production_api
   gcc temp 0.5
   ```

3. **重新加载配置**
   ```
   gcc reload
   ```

### 维护操作

1. **清理历史记录**
   ```
   gcc clear all
   ```

2. **导出统计数据**
   ```
   gcc logs export
   ```

3. **重置统计**
   ```
   gcc logs reset
   ```

### 调试操作

1. **启用调试模式**
   ```
   gcc debug
   ```

2. **查看详细统计**
   ```
   gcc logs stats
   ```

3. **测试模型切换**
   ```
   gcc model test_api
   ```

## 限制说明

### 控制台无法执行的功能

1. **个人历史清除**
   - `gcc clear`（不带 all 参数）
   - 控制台会提示使用 `gcc clear all`

2. **人设切换**
   - `gcc persona switch <名称>`
   - 人设功能仅限游戏内玩家

### 功能差异

- **权限检查**：控制台跳过所有权限检查
- **用户标识**：控制台操作记录为 "CONSOLE"
- **反馈方式**：控制台输出纯文本，无颜色代码效果

## 最佳实践

### 1. 服务器管理
- 使用控制台进行全局配置更改
- 定期检查日志统计
- 在维护时间清理历史记录

### 2. 调试流程
- 启用调试模式进行问题排查
- 查看详细的API调用统计
- 导出日志进行离线分析

### 3. 安全考虑
- 控制台命令会被记录到日志
- 定期备份配置文件
- 监控API调用频率和错误率

## 故障排除

### 命令无响应
1. 检查插件是否正确加载
2. 查看控制台错误信息
3. 尝试重新加载配置

### 统计数据异常
1. 使用 `gcc logs reset` 重置统计
2. 检查日志文件权限
3. 确认配置文件格式正确

### 模型切换失败
1. 检查模型名称是否正确
2. 验证API配置是否有效
3. 查看错误日志获取详细信息

## 日志输出示例

控制台执行命令时的典型输出：

```
[11:30:15 INFO]: [GeminiCraftChat] === 日志统计信息 ===
[11:30:15 INFO]: [GeminiCraftChat] 总API调用次数: 150
[11:30:15 INFO]: [GeminiCraftChat] 总错误次数: 3
[11:30:15 INFO]: [GeminiCraftChat] 活跃玩家数: 8
[11:30:15 INFO]: [GeminiCraftChat] 使用的模型数: 2
[11:30:15 INFO]: [GeminiCraftChat] 成功率: 98.00%
[11:30:15 INFO]: [GeminiCraftChat] 平均响应时间: 1250ms
[11:30:15 INFO]: [GeminiCraftChat] --- 日志配置 ---
[11:30:15 INFO]: [GeminiCraftChat] 日志状态: 启用
[11:30:15 INFO]: [GeminiCraftChat] 分离文件: 是
[11:30:15 INFO]: [GeminiCraftChat] 保留天数: 30 天
```

通过控制台命令，管理员可以高效地管理 GeminiCraftChat 插件，无需进入游戏即可完成所有管理任务。

---

**高效服务器管理！🖥️⚡**

> **完整文档**: [English](docs/en/CONSOLE_COMMANDS.md) | [中文](docs/zh/CONSOLE_COMMANDS.md) | [返回文档首页](docs/README.md)
